{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nfunction AddProduct() {\n  _s();\n  const $ = window.$;\n  useEffect(() => {\n    // useEffect sẽ chỉ chạy một lần khi component được mount\n    const addToCart = item => {\n      // Xử lý logic thêm sản phẩm vào giỏ hàng và lưu vào localStorage\n      let list;\n      if (localStorage.getItem('cart') == null) {\n        list = [item];\n      } else {\n        list = JSON.parse(localStorage.getItem('cart')) || [];\n        let check = true;\n        for (let x of list) {\n          if (x.id === item.id && x.color === item.color && x.size === item.size) {\n            x.quantity += 1;\n            check = false;\n            break;\n          }\n        }\n        if (check) {\n          list.push(item);\n        }\n      }\n      localStorage.setItem('cart', JSON.stringify(list));\n      loadMiniCart();\n      displayNotify(item);\n    };\n    const handleClick = () => {\n      // Xử lý khi click vào sản phẩm\n      const name = document.querySelector('.content__heading').textContent;\n      const img = document.querySelector('.product-img__option-item.active img').getAttribute('src');\n      const color = document.querySelector('.content__color-heading b').textContent;\n      const size = document.querySelector('.btn-size.active').textContent;\n      const price = convertToNumber(document.querySelector('.content__price').textContent);\n      const quantity = JSON.parse(document.querySelector('.product-single__actions .quantity span').textContent);\n      const item = {\n        id: 'detail1',\n        name: name,\n        img: img,\n        color: color,\n        size: size,\n        price: price,\n        quantity: quantity,\n        discount: 0\n      };\n      addToCart(item);\n    };\n\n    // Thêm sự kiện click vào nút \"Thêm vào giỏ hàng\" (thay thế cho $('.btn-addCart').click(...))\n    document.querySelector('.btn-addCart').addEventListener('click', handleClick);\n\n    // Function để load lại giỏ hàng mini\n    const loadMiniCart = () => {\n      let list = JSON.parse(localStorage.getItem('cart')) || [];\n      let str = '';\n      const length = list.length;\n      if (length > 0) {\n        for (let x of list) {\n          str += `<li class=\"mini-cart__item\">\n                    <a class=\"mini-cart__link\">\n                      <div class=\"mini-cart__link-img\">\n                        <img src=\"${x.img}\" alt=\"\">\n                      </div>\n                      <div class=\"mini-cart__link-content\">\n                        <p class=\"mini-cart__link-content-name\">${x.name}</p>\n                        <p class=\"mini-cart__link-content-describe\">${x.color}${x.size}</p>\n                        <p class=\"mini-cart__link-content-price\">${convertVND(x.price)}</p>\n                        <p class=\"mini-cart__link-content-quantity\">x${x.quantity}</p>\n                        <span class=\"mini-cart__item-cancel\" onClick=\"XoaMiniCart('${x.id}','${x.size}','${x.color}')\">✕</span>\n                      </div>\n                    </a>\n                  </li>`;\n        }\n        document.querySelector('.mini-cart__list').innerHTML = str;\n        document.querySelector('.header__actions-cart-notify').textContent = `${length}`;\n        document.querySelector('.added-product').textContent = `${length}`;\n      } else {\n        document.querySelector('.mini-cart__list').innerHTML = '<p class=\"cart-empty\">Không có sản phẩm</p>';\n        document.querySelector('.header__actions-cart-notify').textContent = '0';\n        document.querySelector('.added-product').textContent = '0';\n      }\n    };\n\n    // Function để hiển thị thông báo khi thêm sản phẩm vào giỏ hàng\n    const displayNotify = item => {\n      $(\".notify-added-img img\").attr(\"src\", `${item.img}`);\n      $(\".notify-product__title\").text(`${item.name}`);\n      $(\".notify-product__color\").text(`${item.color}`);\n      $(\".notify-product__size\").text(`${item.size}`);\n      $(\".notify-product__prices\").text(`${convertVND(item.price)}`);\n      $(\".notify-added\").css(\"transform\", \"translateX(0px)\");\n      setTimeout(function () {\n        $(\".notify-added\").css(\"transform\", \"translateX(calc(100% + 20px))\");\n      }, 3000);\n    };\n\n    // Function để chuyển đổi giá từ chuỗi sang số\n    const convertToNumber = price => {\n      let result = '';\n      for (let i = 0; i < price.length; i++) {\n        if (price[i] !== '.' && price[i] !== 'đ') {\n          result += price[i];\n        }\n      }\n      return parseInt(result, 10);\n    };\n\n    // Function để chuyển đổi số sang định dạng VND\n    const convertVND = number => {\n      if (number == 0) {\n        return '0đ';\n      }\n      let str = JSON.stringify(number);\n      let result = '';\n      let length = str.length;\n      let count = 0;\n      for (let i = length - 1; i >= 0; --i) {\n        if (count % 3 === 0 && count !== 0) {\n          result = str[i] + '.' + result;\n        } else {\n          result = str[i] + result;\n        }\n        count++;\n      }\n      return result + 'đ';\n    };\n\n    // Clean-up function\n    return () => {\n      document.querySelector('.btn-addCart').removeEventListener('click', handleClick);\n    };\n  }, []); // Dependency array rỗng để chỉ chạy một lần khi component mount\n\n  return null; // Component này không render gì lên giao diện\n}\n_s(AddProduct, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = AddProduct;\nexport default AddProduct;\nvar _c;\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"names":["React","useEffect","AddProduct","_s","$","window","addToCart","item","list","localStorage","getItem","JSON","parse","check","x","id","color","size","quantity","push","setItem","stringify","loadMiniCart","displayNotify","handleClick","name","document","querySelector","textContent","img","getAttribute","price","convertToNumber","discount","addEventListener","str","length","convertVND","innerHTML","attr","text","css","setTimeout","result","i","parseInt","number","count","removeEventListener","_c","$RefreshReg$"],"sources":["D:/Đồ Án 3/WebBanQuanAo/client/src/until/cart.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\n\r\nfunction AddProduct() {\r\n  const $ = window.$;\r\n  useEffect(() => {\r\n    // useEffect sẽ chỉ chạy một lần khi component được mount\r\n    const addToCart = (item) => {\r\n      // Xử lý logic thêm sản phẩm vào giỏ hàng và lưu vào localStorage\r\n      let list;\r\n      if (localStorage.getItem('cart') == null) {\r\n        list = [item];\r\n      } else {\r\n        list = JSON.parse(localStorage.getItem('cart')) || [];\r\n        let check = true;\r\n        for (let x of list) {\r\n          if (x.id === item.id && x.color === item.color && x.size === item.size) {\r\n            x.quantity += 1;\r\n            check = false;\r\n            break;\r\n          }\r\n        }\r\n        if (check) {\r\n          list.push(item);\r\n        }\r\n      }\r\n      localStorage.setItem('cart', JSON.stringify(list));\r\n      loadMiniCart();\r\n      displayNotify(item);\r\n    };\r\n\r\n    const handleClick = () => {\r\n      // Xử lý khi click vào sản phẩm\r\n      const name = document.querySelector('.content__heading').textContent;\r\n      const img = document.querySelector('.product-img__option-item.active img').getAttribute('src');\r\n      const color = document.querySelector('.content__color-heading b').textContent;\r\n      const size = document.querySelector('.btn-size.active').textContent;\r\n      const price = convertToNumber(document.querySelector('.content__price').textContent);\r\n      const quantity = JSON.parse(document.querySelector('.product-single__actions .quantity span').textContent);\r\n      \r\n      const item = {\r\n        id: 'detail1',\r\n        name: name,\r\n        img: img,\r\n        color: color,\r\n        size: size,\r\n        price: price,\r\n        quantity: quantity,\r\n        discount: 0,\r\n      };\r\n\r\n      addToCart(item);\r\n    };\r\n\r\n    // Thêm sự kiện click vào nút \"Thêm vào giỏ hàng\" (thay thế cho $('.btn-addCart').click(...))\r\n    document.querySelector('.btn-addCart').addEventListener('click', handleClick);\r\n\r\n    // Function để load lại giỏ hàng mini\r\n    const loadMiniCart = () => {\r\n      let list = JSON.parse(localStorage.getItem('cart')) || [];\r\n      let str = '';\r\n      const length = list.length;\r\n      if (length > 0) {\r\n        for (let x of list) {\r\n          str += `<li class=\"mini-cart__item\">\r\n                    <a class=\"mini-cart__link\">\r\n                      <div class=\"mini-cart__link-img\">\r\n                        <img src=\"${x.img}\" alt=\"\">\r\n                      </div>\r\n                      <div class=\"mini-cart__link-content\">\r\n                        <p class=\"mini-cart__link-content-name\">${x.name}</p>\r\n                        <p class=\"mini-cart__link-content-describe\">${x.color}${x.size}</p>\r\n                        <p class=\"mini-cart__link-content-price\">${convertVND(x.price)}</p>\r\n                        <p class=\"mini-cart__link-content-quantity\">x${x.quantity}</p>\r\n                        <span class=\"mini-cart__item-cancel\" onClick=\"XoaMiniCart('${x.id}','${x.size}','${x.color}')\">✕</span>\r\n                      </div>\r\n                    </a>\r\n                  </li>`;\r\n        }\r\n        document.querySelector('.mini-cart__list').innerHTML = str;\r\n        document.querySelector('.header__actions-cart-notify').textContent = `${length}`;\r\n        document.querySelector('.added-product').textContent = `${length}`;\r\n      } else {\r\n        document.querySelector('.mini-cart__list').innerHTML = '<p class=\"cart-empty\">Không có sản phẩm</p>';\r\n        document.querySelector('.header__actions-cart-notify').textContent = '0';\r\n        document.querySelector('.added-product').textContent = '0';\r\n      }\r\n    };\r\n\r\n    // Function để hiển thị thông báo khi thêm sản phẩm vào giỏ hàng\r\n    const displayNotify = (item) => {\r\n      $(\".notify-added-img img\").attr(\"src\", `${item.img}`);\r\n      $(\".notify-product__title\").text(`${item.name}`);\r\n      $(\".notify-product__color\").text(`${item.color}`);\r\n      $(\".notify-product__size\").text(`${item.size}`);\r\n      $(\".notify-product__prices\").text(`${convertVND(item.price)}`);\r\n      $(\".notify-added\").css(\"transform\", \"translateX(0px)\");\r\n\r\n      setTimeout(function () {\r\n        $(\".notify-added\").css(\"transform\", \"translateX(calc(100% + 20px))\");\r\n      }, 3000);\r\n    };\r\n\r\n    // Function để chuyển đổi giá từ chuỗi sang số\r\n    const convertToNumber = (price) => {\r\n      let result = '';\r\n      for (let i = 0; i < price.length; i++) {\r\n        if (price[i] !== '.' && price[i] !== 'đ') {\r\n          result += price[i];\r\n        }\r\n      }\r\n      return parseInt(result, 10);\r\n    };\r\n\r\n    // Function để chuyển đổi số sang định dạng VND\r\n    const convertVND = (number) => {\r\n      if (number == 0) {\r\n        return '0đ';\r\n      }\r\n      let str = JSON.stringify(number);\r\n      let result = '';\r\n      let length = str.length;\r\n      let count = 0;\r\n      for (let i = length - 1; i >= 0; --i) {\r\n        if (count % 3 === 0 && count !== 0) {\r\n          result = str[i] + '.' + result;\r\n        } else {\r\n          result = str[i] + result;\r\n        }\r\n        count++;\r\n      }\r\n      return result + 'đ';\r\n    };\r\n\r\n    // Clean-up function\r\n    return () => {\r\n      document.querySelector('.btn-addCart').removeEventListener('click', handleClick);\r\n    };\r\n  }, []); // Dependency array rỗng để chỉ chạy một lần khi component mount\r\n\r\n  return null; // Component này không render gì lên giao diện\r\n}\r\n\r\nexport default AddProduct;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}