{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nfunction AddProduct() {\n  _s();\n  useEffect(() => {\n    const $ = window.$;\n    function addToCart(item) {\n      var list;\n      if (localStorage.getItem('cart') == null) {\n        list = [item];\n      } else {\n        list = JSON.parse(localStorage.getItem('cart')) || [];\n        let check = true;\n        for (let x of list) {\n          if (x.id == item.id && x.color == item.color && x.size == item.size) {\n            x.quantity += 1;\n            check = false;\n            break;\n          }\n        }\n        if (check) {\n          list.push(item);\n        }\n      }\n      localStorage.setItem('cart', JSON.stringify(list));\n      displayNotify(item); // Hàm hiển thị thông báo đã thêm vào giỏ\n    }\n    function loadMiniCart() {\n      let list = JSON.parse(localStorage.getItem('cart')) || [];\n      var str = \"\";\n      var length = list.length;\n      if (length > 0) {\n        for (let x of list) {\n          str += `<li class=\"mini-cart__item\">\n              <a class=\"mini-cart__link\">\n              <div class=\"mini-cart__link-img\">\n                  <img src=\"${x.img}\" alt=\"\">\n              </div>\n              <div class=\"mini-cart__link-content\">\n                  <p class=\"mini-cart__link-content-name\">${x.name}</p>\n                  <p class=\"mini-cart__link-content-describe\">màu ${x.color} ${x.size}</p>\n                  <p class=\"mini-cart__link-content-price\">${convertVND(x.price)}</p>\n                  <p class=\"mini-cart__link-content-quantity\">x${x.quantity}</p>\n                  <span class=\"mini-cart__item-cancel\" onlick=\"XoaMiniCart('${x.id}','${x.size}','${x.color}')\">✕</span>\n\n              </div>\n              </a>\n          </li>`;\n        }\n        $(\".mini-cart__list\").html(str);\n        $(\".header__actions-cart-notify\").text(`${length}`);\n        $(\".added-product\").text(`${length}`);\n      } else {\n        $(\".mini-cart__list\").html('<p class=\"cart-empty\">Không có sản phẩm</p>');\n        $(\".header__actions-cart-notify\").text(\"0\");\n        $(\".added-product\").text(\"0\");\n      }\n    }\n    loadMiniCart();\n    function displayNotify(item) {\n      $(\".notify-added-img img\").attr(\"src\", `${item.img}`); // load link ảnh\n      $(\".notify-product__title\").text(`${item.name}`);\n      $(\".notify-product__color\").text(`${item.color}`);\n      $(\".notify-product__size\").text(`${item.size}`);\n      $(\".notify-product__prices\").text(`${convertVND(item.price)}`);\n      $(\".notify-added\").css(\"transform\", \"translateX(0px)\"); // đưa block thông báo dịch chuyển vào trong màn hình\n\n      // block thông báo được thu vào sau 4 giây\n      setTimeout(function () {\n        $(\".notify-added\").css(\"transform\", \"translateX(calc(100% + 20px))\");\n      }, 30000000);\n    }\n    $('.btn--size').each(function (indexBtn, valueBtn) {\n      $(valueBtn).click(function () {\n        var id = $(valueBtn).closest('.product').attr(\"id\");\n        var name = $(`#${id} .product-name`).text();\n        var img = $(`#${id} .product-img-1`).attr(\"src\");\n        var color = $(`#${id} .product-content__option-item-wrap.active span`).attr(\"data\");\n        var size = $(valueBtn).text();\n        var price = convertToNumber($(`#${id} .product-price`).text());\n        var item = {\n          id: id,\n          name: name,\n          img: img,\n          color: color,\n          size: size,\n          price: price,\n          quantity: 1,\n          discount: 0\n        };\n        addToCart(item);\n      });\n    });\n    function XoaMiniCart(id, size, color) {\n      let list = JSON.parse(localStorage.getItem('cart')) || [];\n      var index = list.findIndex(x => x.id == id && x.size == size && x.color == color);\n      if (index >= 0) {\n        list.splice(index, 1);\n      }\n      localStorage.setItem('cart', JSON.stringify(list));\n      loadMiniCart();\n    }\n    function convertToNumber(price) {\n      let result = \"\";\n      for (let i = 0; i < price.length; i++) {\n        if (price[i] !== \".\" && price[i] !== \"đ\") {\n          result += price[i];\n        }\n      }\n      return parseInt(result, 10);\n    }\n\n    //Hàm chuyển từ số sang chuỗi theo định dạng VND\n    function convertVND(number) {\n      if (number == 0) {\n        return '0đ';\n      }\n      var str = JSON.stringify(number);\n      var result = \"\";\n      var length = str.length;\n      var count = 0;\n      for (var i = length - 1; i >= 0; --i) {\n        if (count % 3 == 0 && count != 0) {\n          result = str[i] + '.' + result;\n        } else {\n          result = str[i] + result;\n        }\n        count++;\n      }\n      return result + 'đ';\n    }\n  }, []);\n}\n_s(AddProduct, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = AddProduct;\nexport default AddProduct;\nvar _c;\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"names":["React","useEffect","AddProduct","_s","$","window","addToCart","item","list","localStorage","getItem","JSON","parse","check","x","id","color","size","quantity","push","setItem","stringify","displayNotify","loadMiniCart","str","length","img","name","convertVND","price","html","text","attr","css","setTimeout","each","indexBtn","valueBtn","click","closest","convertToNumber","discount","XoaMiniCart","index","findIndex","splice","result","i","parseInt","number","count","_c","$RefreshReg$"],"sources":["D:/Đồ Án 3/WebBanQuanAo/webquanao/src/until/cart.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\n\r\nfunction AddProduct() {\r\n  useEffect(() => {\r\n\r\n    \r\n    const $ = window.$;\r\n\r\n    function addToCart(item) {\r\n      var list;\r\n      if (localStorage.getItem('cart') == null) {\r\n        list = [item];\r\n      } else {\r\n        list = JSON.parse(localStorage.getItem('cart')) || [];\r\n        let check = true;\r\n        for (let x of list) {\r\n          if (x.id == item.id && x.color == item.color && x.size == item.size) {\r\n            x.quantity += 1;\r\n            check = false;\r\n            break;\r\n          }\r\n        }\r\n        if (check) {\r\n          list.push(item);\r\n        }\r\n      }\r\n      localStorage.setItem('cart', JSON.stringify(list));\r\n      displayNotify(item); // Hàm hiển thị thông báo đã thêm vào giỏ\r\n    }\r\n\r\n\r\n    function loadMiniCart() {\r\n      let list= JSON.parse(localStorage.getItem('cart')) || []\r\n      var str=\"\"\r\n      var length=list.length\r\n      if(length>0) {\r\n          for(let x of list) {\r\n              str+=`<li class=\"mini-cart__item\">\r\n              <a class=\"mini-cart__link\">\r\n              <div class=\"mini-cart__link-img\">\r\n                  <img src=\"${x.img}\" alt=\"\">\r\n              </div>\r\n              <div class=\"mini-cart__link-content\">\r\n                  <p class=\"mini-cart__link-content-name\">${x.name}</p>\r\n                  <p class=\"mini-cart__link-content-describe\">màu ${x.color} ${x.size}</p>\r\n                  <p class=\"mini-cart__link-content-price\">${convertVND(x.price)}</p>\r\n                  <p class=\"mini-cart__link-content-quantity\">x${x.quantity}</p>\r\n                  <span class=\"mini-cart__item-cancel\" onlick=\"XoaMiniCart('${x.id}','${x.size}','${x.color}')\">✕</span>\r\n\r\n              </div>\r\n              </a>\r\n          </li>`\r\n          }\r\n          $(\".mini-cart__list\").html(str)\r\n          $(\".header__actions-cart-notify\").text(`${length}`)\r\n          $(\".added-product\").text(`${length}`)\r\n      }\r\n      else {\r\n          $(\".mini-cart__list\").html('<p class=\"cart-empty\">Không có sản phẩm</p>')\r\n          $(\".header__actions-cart-notify\").text(\"0\")\r\n          $(\".added-product\").text(\"0\")\r\n      }                        \r\n  }\r\n  loadMiniCart();\r\n\r\n\r\n\r\n    function displayNotify(item) {\r\n        $(\".notify-added-img img\").attr(\"src\", `${item.img}`); // load link ảnh\r\n        $(\".notify-product__title\").text(`${item.name}`);\r\n        $(\".notify-product__color\").text(`${item.color}`);\r\n        $(\".notify-product__size\").text(`${item.size}`);\r\n        $(\".notify-product__prices\").text(`${convertVND(item.price)}`)\r\n        $(\".notify-added\").css(\"transform\", \"translateX(0px)\"); // đưa block thông báo dịch chuyển vào trong màn hình\r\n        \r\n        // block thông báo được thu vào sau 4 giây\r\n        setTimeout(function () {\r\n          $(\".notify-added\").css(\"transform\", \"translateX(calc(100% + 20px))\");\r\n        }, 30000000);\r\n    }\r\n\r\n\r\n    $('.btn--size').each(function(indexBtn, valueBtn) {\r\n      $(valueBtn).click(function() {\r\n        var id = $(valueBtn).closest('.product').attr(\"id\");\r\n        var name = $(`#${id} .product-name`).text();\r\n        var img = $(`#${id} .product-img-1`).attr(\"src\");\r\n        var color = $(`#${id} .product-content__option-item-wrap.active span`).attr(\"data\");\r\n        var size = $(valueBtn).text();\r\n        var price = convertToNumber($(`#${id} .product-price`).text());\r\n        var item = {\r\n          id: id,\r\n          name: name,\r\n          img: img,\r\n          color: color,\r\n          size: size,\r\n          price: price,\r\n          quantity: 1,\r\n          discount: 0\r\n        };\r\n        addToCart(item);\r\n      });\r\n    });\r\n\r\n    \r\n\r\n    function XoaMiniCart(id,size,color){\r\n      let list= JSON.parse(localStorage.getItem('cart')) || []\r\n      var index = list.findIndex(x => x.id == id && x.size == size && x.color == color);\r\n      if (index >= 0) {\r\n          list.splice(index, 1);\r\n      }\r\n      localStorage.setItem('cart', JSON.stringify(list));\r\n      loadMiniCart();\r\n  }\r\n\r\n    function convertToNumber(price) {\r\n        let result = \"\";\r\n        for (let i = 0; i < price.length; i++) {\r\n          if (price[i] !== \".\" && price[i] !== \"đ\") {\r\n            result += price[i];\r\n          }\r\n        }\r\n        return parseInt(result, 10);\r\n      }\r\n\r\n      //Hàm chuyển từ số sang chuỗi theo định dạng VND\r\n     function convertVND(number) {\r\n      if(number==0) {return '0đ'}\r\n      var str=JSON.stringify(number);\r\n      var result=\"\"\r\n      var length=str.length\r\n      var count=0\r\n      for(var i=length-1; i>=0; --i) {\r\n          if(count%3==0 && count!=0) {\r\n              result=str[i]+'.'+result\r\n          }\r\n          else {\r\n              result=str[i]+result\r\n          }\r\n          count++\r\n      }\r\n      return result+'đ'\r\n  }\r\n      \r\n\r\n\r\n  }, []);\r\n\r\n}\r\n\r\nexport default AddProduct;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}